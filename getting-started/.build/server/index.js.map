{"version":3,"names":["Server","loadConfig","config","process","env","ENV","import","meta","url","console","log","app","name","pid","server","useDefaultApplicationTemplate","start","globalsSchema","trigger","type","event","stateManager","registerSchema","globals","create"],"sources":["../../src/server/index.js"],"sourcesContent":["import '@soundworks/helpers/polyfills.js';\nimport { Server } from '@soundworks/core/server.js';\n\nimport { loadConfig } from '../utils/load-config.js';\nimport '../utils/catch-unhandled-errors.js';\n\n// - General documentation: https://soundworks.dev/\n// - API documentation:     https://soundworks.dev/api\n// - Issue Tracker:         https://github.com/collective-soundworks/soundworks/issues\n// - Wizard & Tools:        `npx soundworks`\n\nconst config = loadConfig(process.env.ENV, import.meta.url);\n\nconsole.log(`\n--------------------------------------------------------\n- launching \"${config.app.name}\" in \"${process.env.ENV || 'default'}\" environment\n- [pid: ${process.pid}]\n--------------------------------------------------------\n`);\n\n/**\n * Create the soundworks server\n */\nconst server = new Server(config);\n// configure the server for usage within this application template\nserver.useDefaultApplicationTemplate();\n\n/**\n * Register plugins\n */\n// server.pluginManager.register('platform', pluginPlatform);\n\n/**\n * Register schemas\n */\n// server.stateManager.registerSchema('my-schema', definition);\n\n/**\n * Launch application (init plugins, http server, etc.)\n */\nawait server.start();\n\n// and do your own stuff!\nconst globalsSchema = {\n  trigger: { type: 'boolean', event: true },\n};\n\nserver.stateManager.registerSchema('globals', globalsSchema);\n\nconst globals = await server.stateManager.create('globals');\n\n\n"],"mappings":"AAAA,OAAO,kCAAkC;AACzC,SAASA,MAAM,QAAQ,4BAA4B;AAEnD,SAASC,UAAU,QAAQ,yBAAyB;AACpD,OAAO,oCAAoC;;AAE3C;AACA;AACA;AACA;;AAEA,MAAMC,MAAM,GAAGD,UAAU,CAACE,OAAO,CAACC,GAAG,CAACC,GAAG,EAAEC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC;AAE3DC,OAAO,CAACC,GAAG,CAAE;AACb;AACA,eAAeR,MAAM,CAACS,GAAG,CAACC,IAAK,SAAQT,OAAO,CAACC,GAAG,CAACC,GAAG,IAAI,SAAU;AACpE,UAAUF,OAAO,CAACU,GAAI;AACtB;AACA,CAAC,CAAC;;AAEF;AACA;AACA;AACA,MAAMC,MAAM,GAAG,IAAId,MAAM,CAACE,MAAM,CAAC;AACjC;AACAY,MAAM,CAACC,6BAA6B,EAAE;;AAEtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAMD,MAAM,CAACE,KAAK,EAAE;;AAEpB;AACA,MAAMC,aAAa,GAAG;EACpBC,OAAO,EAAE;IAAEC,IAAI,EAAE,SAAS;IAAEC,KAAK,EAAE;EAAK;AAC1C,CAAC;AAEDN,MAAM,CAACO,YAAY,CAACC,cAAc,CAAC,SAAS,EAAEL,aAAa,CAAC;AAE5D,MAAMM,OAAO,GAAG,MAAMT,MAAM,CAACO,YAAY,CAACG,MAAM,CAAC,SAAS,CAAC"}
